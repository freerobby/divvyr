require File.expand_path(File.join(File.dirname(__FILE__), '..', '..', 'spec_helper'))

require File.expand_path(File.join(File.dirname(__FILE__), '..', '..', '..', 'app', 'lib', 'mlb_importer'))

describe MlbImporter do
  RED_SOX_2014 = <<-EOS
START_DATE,START_TIME,START_TIME_ET,SUBJECT,LOCATION,DESCRIPTION,END_DATE,END_DATE_ET,END_TIME,END_TIME_ET,REMINDER_OFF,REMINDER_ON,REMINDER_DATE,REMINDER_TIME,REMINDER_TIME_ET,SHOWTIMEAS_FREE,SHOWTIMEAS_BUSY
02/27/14,01:05 PM,01:05 PM,Huskies at Red Sox,JetBlue Park,Local Radio: WEEI 850,02/27/14,02/27/14,04:05 PM,04:05 PM,FALSE,TRUE,02/27/14,12:05 PM,12:05 PM,FREE,BUSY
02/27/14,03:33 AM,03:33 AM,Eagles at Red Sox,JetBlue Park,Local Radio: WEEI 850,02/27/14,02/27/14,06:33 AM,06:33 AM,FALSE,TRUE,02/27/14,02:33 AM,02:33 AM,FREE,BUSY
02/28/14,01:05 PM,01:05 PM,Twins at Red Sox,JetBlue Park,,02/28/14,02/28/14,04:05 PM,04:05 PM,FALSE,TRUE,02/28/14,12:05 PM,12:05 PM,FREE,BUSY
03/02/14,01:05 PM,01:05 PM,Orioles at Red Sox,JetBlue Park,Local TV: NESN -- MLBN ----- Local Radio: WEEI 93.7,03/02/14,03/02/14,04:05 PM,04:05 PM,FALSE,TRUE,03/02/14,12:05 PM,12:05 PM,FREE,BUSY
03/04/14,01:05 PM,01:05 PM,Rays at Red Sox,JetBlue Park,,03/04/14,03/04/14,04:05 PM,04:05 PM,FALSE,TRUE,03/04/14,12:05 PM,12:05 PM,FREE,BUSY
03/07/14,01:05 PM,01:05 PM,Braves at Red Sox,JetBlue Park,,03/07/14,03/07/14,04:05 PM,04:05 PM,FALSE,TRUE,03/07/14,12:05 PM,12:05 PM,FREE,BUSY
03/08/14,07:05 PM,07:05 PM,Orioles at Red Sox,JetBlue Park,Local Radio: WEEI 93.7,03/08/14,03/08/14,10:05 PM,10:05 PM,FALSE,TRUE,03/08/14,06:05 PM,06:05 PM,FREE,BUSY
03/10/14,01:05 PM,01:05 PM,Rays at Red Sox,JetBlue Park,Local TV: NESN -- MLBN,03/10/14,03/10/14,04:05 PM,04:05 PM,FALSE,TRUE,03/10/14,12:05 PM,12:05 PM,FREE,BUSY
03/11/14,01:05 PM,01:05 PM,Marlins at Red Sox,JetBlue Park,,03/11/14,03/11/14,04:05 PM,04:05 PM,FALSE,TRUE,03/11/14,12:05 PM,12:05 PM,FREE,BUSY
03/15/14,07:05 PM,07:05 PM,Phillies at Red Sox,JetBlue Park,Local TV: NESN -- MLBN ----- Local Radio: WEEI 93.7,03/15/14,03/15/14,10:05 PM,10:05 PM,FALSE,TRUE,03/15/14,06:05 PM,06:05 PM,FREE,BUSY
03/17/14,01:05 PM,01:05 PM,Cardinals at Red Sox,JetBlue Park,Local TV: ESPN ----- Local Radio: WEEI 850,03/17/14,03/17/14,04:05 PM,04:05 PM,FALSE,TRUE,03/17/14,12:05 PM,12:05 PM,FREE,BUSY
03/19/14,07:05 PM,07:05 PM,Pirates at Red Sox,JetBlue Park,Local TV: NESN ----- Local Radio: WEEI 93.7,03/19/14,03/19/14,10:05 PM,10:05 PM,FALSE,TRUE,03/19/14,06:05 PM,06:05 PM,FREE,BUSY
03/20/14,07:05 PM,07:05 PM,Yankees at Red Sox,JetBlue Park,Local TV: ESPN -- NESN ----- Local Radio: WEEI 93.7,03/20/14,03/20/14,10:05 PM,10:05 PM,FALSE,TRUE,03/20/14,06:05 PM,06:05 PM,FREE,BUSY
03/23/14,01:05 PM,01:05 PM,Rays at Red Sox,JetBlue Park,Local TV: NESN -- MLBN (delay) ----- Local Radio: WEEI 93.7,03/23/14,03/23/14,04:05 PM,04:05 PM,FALSE,TRUE,03/23/14,12:05 PM,12:05 PM,FREE,BUSY
03/26/14,01:05 PM,01:05 PM,Orioles at Red Sox,JetBlue Park,,03/26/14,03/26/14,04:05 PM,04:05 PM,FALSE,TRUE,03/26/14,12:05 PM,12:05 PM,FREE,BUSY
03/27/14,07:05 PM,07:05 PM,Twins at Red Sox,JetBlue Park,Local Radio: WEEI 93.7,03/27/14,03/27/14,10:05 PM,10:05 PM,FALSE,TRUE,03/27/14,06:05 PM,06:05 PM,FREE,BUSY
03/29/14,01:05 PM,01:05 PM,Twins at Red Sox,JetBlue Park,Local Radio: WEEI 93.7,03/29/14,03/29/14,04:05 PM,04:05 PM,FALSE,TRUE,03/29/14,12:05 PM,12:05 PM,FREE,BUSY
04/04/14,02:05 PM,02:05 PM,Brewers at Red Sox,Fenway Park,,04/04/14,04/04/14,05:05 PM,05:05 PM,FALSE,TRUE,04/04/14,01:05 PM,01:05 PM,FREE,BUSY
04/05/14,07:10 PM,07:10 PM,Brewers at Red Sox,Fenway Park,,04/05/14,04/05/14,10:10 PM,10:10 PM,FALSE,TRUE,04/05/14,06:10 PM,06:10 PM,FREE,BUSY
04/06/14,01:35 PM,01:35 PM,Brewers at Red Sox,Fenway Park,,04/06/14,04/06/14,04:35 PM,04:35 PM,FALSE,TRUE,04/06/14,12:35 PM,12:35 PM,FREE,BUSY
04/07/14,07:10 PM,07:10 PM,Rangers at Red Sox,Fenway Park,Local TV: ESPN,04/07/14,04/07/14,10:10 PM,10:10 PM,FALSE,TRUE,04/07/14,06:10 PM,06:10 PM,FREE,BUSY
04/08/14,06:10 PM,06:10 PM,Rangers at Red Sox,Fenway Park,,04/08/14,04/08/14,09:10 PM,09:10 PM,FALSE,TRUE,04/08/14,05:10 PM,05:10 PM,FREE,BUSY
04/09/14,04:05 PM,04:05 PM,Rangers at Red Sox,Fenway Park,,04/09/14,04/09/14,07:05 PM,07:05 PM,FALSE,TRUE,04/09/14,03:05 PM,03:05 PM,FREE,BUSY
04/18/14,07:10 PM,07:10 PM,Orioles at Red Sox,Fenway Park,,04/18/14,04/18/14,10:10 PM,10:10 PM,FALSE,TRUE,04/18/14,06:10 PM,06:10 PM,FREE,BUSY
04/19/14,01:35 PM,01:35 PM,Orioles at Red Sox,Fenway Park,,04/19/14,04/19/14,04:35 PM,04:35 PM,FALSE,TRUE,04/19/14,12:35 PM,12:35 PM,FREE,BUSY
04/20/14,07:05 PM,07:05 PM,Orioles at Red Sox,Fenway Park,Local TV: ESPN,04/20/14,04/20/14,10:05 PM,10:05 PM,FALSE,TRUE,04/20/14,06:05 PM,06:05 PM,FREE,BUSY
04/21/14,11:05 AM,11:05 AM,Orioles at Red Sox,Fenway Park,,04/21/14,04/21/14,02:05 PM,02:05 PM,FALSE,TRUE,04/21/14,10:05 AM,10:05 AM,FREE,BUSY
04/22/14,07:10 PM,07:10 PM,Yankees at Red Sox,Fenway Park,,04/22/14,04/22/14,10:10 PM,10:10 PM,FALSE,TRUE,04/22/14,06:10 PM,06:10 PM,FREE,BUSY
04/23/14,07:10 PM,07:10 PM,Yankees at Red Sox,Fenway Park,,04/23/14,04/23/14,10:10 PM,10:10 PM,FALSE,TRUE,04/23/14,06:10 PM,06:10 PM,FREE,BUSY
04/24/14,07:10 PM,07:10 PM,Yankees at Red Sox,Fenway Park,,04/24/14,04/24/14,10:10 PM,10:10 PM,FALSE,TRUE,04/24/14,06:10 PM,06:10 PM,FREE,BUSY
04/29/14,07:10 PM,07:10 PM,Rays at Red Sox,Fenway Park,,04/29/14,04/29/14,10:10 PM,10:10 PM,FALSE,TRUE,04/29/14,06:10 PM,06:10 PM,FREE,BUSY
04/30/14,07:10 PM,07:10 PM,Rays at Red Sox,Fenway Park,,04/30/14,04/30/14,10:10 PM,10:10 PM,FALSE,TRUE,04/30/14,06:10 PM,06:10 PM,FREE,BUSY
05/01/14,07:10 PM,07:10 PM,Rays at Red Sox,Fenway Park,,05/01/14,05/01/14,10:10 PM,10:10 PM,FALSE,TRUE,05/01/14,06:10 PM,06:10 PM,FREE,BUSY
05/02/14,07:10 PM,07:10 PM,Athletics at Red Sox,Fenway Park,,05/02/14,05/02/14,10:10 PM,10:10 PM,FALSE,TRUE,05/02/14,06:10 PM,06:10 PM,FREE,BUSY
05/03/14,01:35 PM,01:35 PM,Athletics at Red Sox,Fenway Park,,05/03/14,05/03/14,04:35 PM,04:35 PM,FALSE,TRUE,05/03/14,12:35 PM,12:35 PM,FREE,BUSY
05/04/14,01:35 PM,01:35 PM,Athletics at Red Sox,Fenway Park,,05/04/14,05/04/14,04:35 PM,04:35 PM,FALSE,TRUE,05/04/14,12:35 PM,12:35 PM,FREE,BUSY
05/06/14,07:10 PM,07:10 PM,Reds at Red Sox,Fenway Park,,05/06/14,05/06/14,10:10 PM,10:10 PM,FALSE,TRUE,05/06/14,06:10 PM,06:10 PM,FREE,BUSY
05/07/14,07:10 PM,07:10 PM,Reds at Red Sox,Fenway Park,,05/07/14,05/07/14,10:10 PM,10:10 PM,FALSE,TRUE,05/07/14,06:10 PM,06:10 PM,FREE,BUSY
05/16/14,07:10 PM,07:10 PM,Tigers at Red Sox,Fenway Park,,05/16/14,05/16/14,10:10 PM,10:10 PM,FALSE,TRUE,05/16/14,06:10 PM,06:10 PM,FREE,BUSY
05/17/14,07:10 PM,07:10 PM,Tigers at Red Sox,Fenway Park,,05/17/14,05/17/14,10:10 PM,10:10 PM,FALSE,TRUE,05/17/14,06:10 PM,06:10 PM,FREE,BUSY
05/18/14,08:05 PM,08:05 PM,Tigers at Red Sox,Fenway Park,Local TV: ESPN,05/18/14,05/18/14,11:05 PM,11:05 PM,FALSE,TRUE,05/18/14,07:05 PM,07:05 PM,FREE,BUSY
05/20/14,07:10 PM,07:10 PM,Blue Jays at Red Sox,Fenway Park,,05/20/14,05/20/14,10:10 PM,10:10 PM,FALSE,TRUE,05/20/14,06:10 PM,06:10 PM,FREE,BUSY
05/21/14,07:10 PM,07:10 PM,Blue Jays at Red Sox,Fenway Park,,05/21/14,05/21/14,10:10 PM,10:10 PM,FALSE,TRUE,05/21/14,06:10 PM,06:10 PM,FREE,BUSY
05/22/14,04:05 PM,04:05 PM,Blue Jays at Red Sox,Fenway Park,,05/22/14,05/22/14,07:05 PM,07:05 PM,FALSE,TRUE,05/22/14,03:05 PM,03:05 PM,FREE,BUSY
05/28/14,07:10 PM,07:10 PM,Braves at Red Sox,Fenway Park,,05/28/14,05/28/14,10:10 PM,10:10 PM,FALSE,TRUE,05/28/14,06:10 PM,06:10 PM,FREE,BUSY
05/29/14,07:10 PM,07:10 PM,Braves at Red Sox,Fenway Park,,05/29/14,05/29/14,10:10 PM,10:10 PM,FALSE,TRUE,05/29/14,06:10 PM,06:10 PM,FREE,BUSY
05/30/14,07:10 PM,07:10 PM,Rays at Red Sox,Fenway Park,,05/30/14,05/30/14,10:10 PM,10:10 PM,FALSE,TRUE,05/30/14,06:10 PM,06:10 PM,FREE,BUSY
05/31/14,07:15 PM,07:15 PM,Rays at Red Sox,Fenway Park,,05/31/14,05/31/14,10:15 PM,10:15 PM,FALSE,TRUE,05/31/14,06:15 PM,06:15 PM,FREE,BUSY
06/01/14,01:35 PM,01:35 PM,Rays at Red Sox,Fenway Park,,06/01/14,06/01/14,04:35 PM,04:35 PM,FALSE,TRUE,06/01/14,12:35 PM,12:35 PM,FREE,BUSY
06/12/14,07:10 PM,07:10 PM,Indians at Red Sox,Fenway Park,,06/12/14,06/12/14,10:10 PM,10:10 PM,FALSE,TRUE,06/12/14,06:10 PM,06:10 PM,FREE,BUSY
06/13/14,07:10 PM,07:10 PM,Indians at Red Sox,Fenway Park,,06/13/14,06/13/14,10:10 PM,10:10 PM,FALSE,TRUE,06/13/14,06:10 PM,06:10 PM,FREE,BUSY
06/14/14,04:05 PM,04:05 PM,Indians at Red Sox,Fenway Park,,06/14/14,06/14/14,07:05 PM,07:05 PM,FALSE,TRUE,06/14/14,03:05 PM,03:05 PM,FREE,BUSY
06/15/14,01:35 PM,01:35 PM,Indians at Red Sox,Fenway Park,,06/15/14,06/15/14,04:35 PM,04:35 PM,FALSE,TRUE,06/15/14,12:35 PM,12:35 PM,FREE,BUSY
06/16/14,07:10 PM,07:10 PM,Twins at Red Sox,Fenway Park,,06/16/14,06/16/14,10:10 PM,10:10 PM,FALSE,TRUE,06/16/14,06:10 PM,06:10 PM,FREE,BUSY
06/17/14,07:10 PM,07:10 PM,Twins at Red Sox,Fenway Park,,06/17/14,06/17/14,10:10 PM,10:10 PM,FALSE,TRUE,06/17/14,06:10 PM,06:10 PM,FREE,BUSY
06/18/14,01:35 PM,01:35 PM,Twins at Red Sox,Fenway Park,,06/18/14,06/18/14,04:35 PM,04:35 PM,FALSE,TRUE,06/18/14,12:35 PM,12:35 PM,FREE,BUSY
06/30/14,07:10 PM,07:10 PM,Cubs at Red Sox,Fenway Park,,06/30/14,06/30/14,10:10 PM,10:10 PM,FALSE,TRUE,06/30/14,06:10 PM,06:10 PM,FREE,BUSY
07/01/14,07:10 PM,07:10 PM,Cubs at Red Sox,Fenway Park,,07/01/14,07/01/14,10:10 PM,10:10 PM,FALSE,TRUE,07/01/14,06:10 PM,06:10 PM,FREE,BUSY
07/02/14,07:10 PM,07:10 PM,Cubs at Red Sox,Fenway Park,,07/02/14,07/02/14,10:10 PM,10:10 PM,FALSE,TRUE,07/02/14,06:10 PM,06:10 PM,FREE,BUSY
07/04/14,01:35 PM,01:35 PM,Orioles at Red Sox,Fenway Park,,07/04/14,07/04/14,04:35 PM,04:35 PM,FALSE,TRUE,07/04/14,12:35 PM,12:35 PM,FREE,BUSY
07/05/14,07:15 PM,07:15 PM,Orioles at Red Sox,Fenway Park,,07/05/14,07/05/14,10:15 PM,10:15 PM,FALSE,TRUE,07/05/14,06:15 PM,06:15 PM,FREE,BUSY
07/06/14,01:35 PM,01:35 PM,Orioles at Red Sox,Fenway Park,,07/06/14,07/06/14,04:35 PM,04:35 PM,FALSE,TRUE,07/06/14,12:35 PM,12:35 PM,FREE,BUSY
07/07/14,07:10 PM,07:10 PM,White Sox at Red Sox,Fenway Park,,07/07/14,07/07/14,10:10 PM,10:10 PM,FALSE,TRUE,07/07/14,06:10 PM,06:10 PM,FREE,BUSY
07/08/14,07:10 PM,07:10 PM,White Sox at Red Sox,Fenway Park,,07/08/14,07/08/14,10:10 PM,10:10 PM,FALSE,TRUE,07/08/14,06:10 PM,06:10 PM,FREE,BUSY
07/09/14,07:10 PM,07:10 PM,White Sox at Red Sox,Fenway Park,,07/09/14,07/09/14,10:10 PM,10:10 PM,FALSE,TRUE,07/09/14,06:10 PM,06:10 PM,FREE,BUSY
07/10/14,04:05 PM,04:05 PM,White Sox at Red Sox,Fenway Park,,07/10/14,07/10/14,07:05 PM,07:05 PM,FALSE,TRUE,07/10/14,03:05 PM,03:05 PM,FREE,BUSY
07/15/14,03:33 AM,03:33 AM,NL All-Stars at AL All-Stars,Target Field,,07/15/14,07/15/14,06:33 AM,06:33 AM,FALSE,TRUE,07/15/14,02:33 AM,02:33 AM,FREE,BUSY
07/18/14,07:10 PM,07:10 PM,Royals at Red Sox,Fenway Park,,07/18/14,07/18/14,10:10 PM,10:10 PM,FALSE,TRUE,07/18/14,06:10 PM,06:10 PM,FREE,BUSY
07/19/14,07:10 PM,07:10 PM,Royals at Red Sox,Fenway Park,,07/19/14,07/19/14,10:10 PM,10:10 PM,FALSE,TRUE,07/19/14,06:10 PM,06:10 PM,FREE,BUSY
07/20/14,01:35 PM,01:35 PM,Royals at Red Sox,Fenway Park,,07/20/14,07/20/14,04:35 PM,04:35 PM,FALSE,TRUE,07/20/14,12:35 PM,12:35 PM,FREE,BUSY
07/28/14,07:10 PM,07:10 PM,Blue Jays at Red Sox,Fenway Park,,07/28/14,07/28/14,10:10 PM,10:10 PM,FALSE,TRUE,07/28/14,06:10 PM,06:10 PM,FREE,BUSY
07/29/14,07:10 PM,07:10 PM,Blue Jays at Red Sox,Fenway Park,,07/29/14,07/29/14,10:10 PM,10:10 PM,FALSE,TRUE,07/29/14,06:10 PM,06:10 PM,FREE,BUSY
07/30/14,07:10 PM,07:10 PM,Blue Jays at Red Sox,Fenway Park,,07/30/14,07/30/14,10:10 PM,10:10 PM,FALSE,TRUE,07/30/14,06:10 PM,06:10 PM,FREE,BUSY
08/01/14,07:10 PM,07:10 PM,Yankees at Red Sox,Fenway Park,,08/01/14,08/01/14,10:10 PM,10:10 PM,FALSE,TRUE,08/01/14,06:10 PM,06:10 PM,FREE,BUSY
08/02/14,04:05 PM,04:05 PM,Yankees at Red Sox,Fenway Park,,08/02/14,08/02/14,07:05 PM,07:05 PM,FALSE,TRUE,08/02/14,03:05 PM,03:05 PM,FREE,BUSY
08/03/14,03:33 AM,03:33 AM,Yankees at Red Sox,Fenway Park,,08/03/14,08/03/14,06:33 AM,06:33 AM,FALSE,TRUE,08/03/14,02:33 AM,02:33 AM,FREE,BUSY
08/14/14,07:10 PM,07:10 PM,Astros at Red Sox,Fenway Park,,08/14/14,08/14/14,10:10 PM,10:10 PM,FALSE,TRUE,08/14/14,06:10 PM,06:10 PM,FREE,BUSY
08/15/14,07:10 PM,07:10 PM,Astros at Red Sox,Fenway Park,,08/15/14,08/15/14,10:10 PM,10:10 PM,FALSE,TRUE,08/15/14,06:10 PM,06:10 PM,FREE,BUSY
08/16/14,07:10 PM,07:10 PM,Astros at Red Sox,Fenway Park,,08/16/14,08/16/14,10:10 PM,10:10 PM,FALSE,TRUE,08/16/14,06:10 PM,06:10 PM,FREE,BUSY
08/17/14,01:35 PM,01:35 PM,Astros at Red Sox,Fenway Park,,08/17/14,08/17/14,04:35 PM,04:35 PM,FALSE,TRUE,08/17/14,12:35 PM,12:35 PM,FREE,BUSY
08/18/14,07:10 PM,07:10 PM,Angels at Red Sox,Fenway Park,,08/18/14,08/18/14,10:10 PM,10:10 PM,FALSE,TRUE,08/18/14,06:10 PM,06:10 PM,FREE,BUSY
08/19/14,07:10 PM,07:10 PM,Angels at Red Sox,Fenway Park,,08/19/14,08/19/14,10:10 PM,10:10 PM,FALSE,TRUE,08/19/14,06:10 PM,06:10 PM,FREE,BUSY
08/20/14,07:10 PM,07:10 PM,Angels at Red Sox,Fenway Park,,08/20/14,08/20/14,10:10 PM,10:10 PM,FALSE,TRUE,08/20/14,06:10 PM,06:10 PM,FREE,BUSY
08/21/14,07:10 PM,07:10 PM,Angels at Red Sox,Fenway Park,,08/21/14,08/21/14,10:10 PM,10:10 PM,FALSE,TRUE,08/21/14,06:10 PM,06:10 PM,FREE,BUSY
08/22/14,07:10 PM,07:10 PM,Mariners at Red Sox,Fenway Park,,08/22/14,08/22/14,10:10 PM,10:10 PM,FALSE,TRUE,08/22/14,06:10 PM,06:10 PM,FREE,BUSY
08/23/14,01:35 PM,01:35 PM,Mariners at Red Sox,Fenway Park,,08/23/14,08/23/14,04:35 PM,04:35 PM,FALSE,TRUE,08/23/14,12:35 PM,12:35 PM,FREE,BUSY
08/24/14,01:35 PM,01:35 PM,Mariners at Red Sox,Fenway Park,,08/24/14,08/24/14,04:35 PM,04:35 PM,FALSE,TRUE,08/24/14,12:35 PM,12:35 PM,FREE,BUSY
09/05/14,07:10 PM,07:10 PM,Blue Jays at Red Sox,Fenway Park,,09/05/14,09/05/14,10:10 PM,10:10 PM,FALSE,TRUE,09/05/14,06:10 PM,06:10 PM,FREE,BUSY
09/06/14,07:10 PM,07:10 PM,Blue Jays at Red Sox,Fenway Park,,09/06/14,09/06/14,10:10 PM,10:10 PM,FALSE,TRUE,09/06/14,06:10 PM,06:10 PM,FREE,BUSY
09/07/14,01:35 PM,01:35 PM,Blue Jays at Red Sox,Fenway Park,,09/07/14,09/07/14,04:35 PM,04:35 PM,FALSE,TRUE,09/07/14,12:35 PM,12:35 PM,FREE,BUSY
09/08/14,07:10 PM,07:10 PM,Orioles at Red Sox,Fenway Park,,09/08/14,09/08/14,10:10 PM,10:10 PM,FALSE,TRUE,09/08/14,06:10 PM,06:10 PM,FREE,BUSY
09/09/14,07:10 PM,07:10 PM,Orioles at Red Sox,Fenway Park,,09/09/14,09/09/14,10:10 PM,10:10 PM,FALSE,TRUE,09/09/14,06:10 PM,06:10 PM,FREE,BUSY
09/10/14,01:35 PM,01:35 PM,Orioles at Red Sox,Fenway Park,,09/10/14,09/10/14,04:35 PM,04:35 PM,FALSE,TRUE,09/10/14,12:35 PM,12:35 PM,FREE,BUSY
09/23/14,07:10 PM,07:10 PM,Rays at Red Sox,Fenway Park,,09/23/14,09/23/14,10:10 PM,10:10 PM,FALSE,TRUE,09/23/14,06:10 PM,06:10 PM,FREE,BUSY
09/24/14,07:10 PM,07:10 PM,Rays at Red Sox,Fenway Park,,09/24/14,09/24/14,10:10 PM,10:10 PM,FALSE,TRUE,09/24/14,06:10 PM,06:10 PM,FREE,BUSY
09/25/14,07:10 PM,07:10 PM,Rays at Red Sox,Fenway Park,,09/25/14,09/25/14,10:10 PM,10:10 PM,FALSE,TRUE,09/25/14,06:10 PM,06:10 PM,FREE,BUSY
09/26/14,07:10 PM,07:10 PM,Yankees at Red Sox,Fenway Park,,09/26/14,09/26/14,10:10 PM,10:10 PM,FALSE,TRUE,09/26/14,06:10 PM,06:10 PM,FREE,BUSY
09/27/14,03:33 AM,03:33 AM,Yankees at Red Sox,Fenway Park,,09/27/14,09/27/14,06:33 AM,06:33 AM,FALSE,TRUE,09/27/14,02:33 AM,02:33 AM,FREE,BUSY
09/28/14,01:35 PM,01:35 PM,Yankees at Red Sox,Fenway Park,,09/28/14,09/28/14,04:35 PM,04:35 PM,FALSE,TRUE,09/28/14,12:35 PM,12:35 PM,FREE,BUSY
  EOS

  describe '#get_valid_games' do
    it 'returns all home games that are not all star games' do
      FakeWeb.register_uri(:get, 'http://www.ticketing-client.com/ticketing-client/csv/EventTicketPromotionPrice.tiksrv?team_id=111&home_team_id=111&display_in=singlegame&ticket_category=Tickets&site_section=Default&sub_category=Default&leave_empty_games=true&event_type=Y', :body => RED_SOX_2014)
      games = MlbImporter.new.get_valid_games(111)
      expect(games.count).to eql(81)
      games.each do |g|
        expect(g.data[1]).not_to include('All-Stars')
      end
    end
  end
end
